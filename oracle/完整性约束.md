### 数据的完整性简介
>就是正确性、准确性，包含三种：实体完整性、参照完整性、用户自定义完整性。Oracle中主要通过约束、触发器、过程函数
实现的。 

- 维护数据的完整性
>有not null、unique、check、primary key、foreign key五种。
>>- not null例如学生的姓名；
>>- unique例如学生的学号；    
>>- primary key主键、foreign key外键、check可以按照用户要求，进行自动检查。
>>- unique不可以重复，但是可以为空。
>>- primary key不可以重复，也不能为空。
>>- 一个表只能一个primary key，却可以多个unique。 
>>- not null只能在列内定义，其他4种约束可以在列定义结束后，在表内定义。

eg.

```SQL
学生（学号，姓名，系编号）  
主键不能错误，eg.学号不能为负数（实体完整性）
系编号必须在系的系编号的范围之内。外键可以为空（参考完整性）。
系（系编号，系名称）

用户（姓名，出生日期，工作日期），工作日期晚于出生日期，
即为用户自定义完整性。
```

### 练习
>- select u.constraint_name,u.constraint_type,u.table_name, u.index_name  
from user_constraints u  
where u.table_name = 'YG2';

>- select *from user_cons_columns ucc
where ucc.table_name = 'YG2';

```SQL
-- 员工表
-- not null示例
create table yg2(bh number(4) not null,xm varchar2(8));

CONSTRAINT_NAME                CONSTRAINT_TYPE TABLE_NAME                     INDEX_NAME
------------------------------ --------------- ------------------------------ ------------------------------
SYS_C007035                    C               YG2 

--CONSTRAINT_TYPE为C，代表字段非空，或者check约束。左侧的CONSTRAINT_NAME，是oracle帮我们自动命名的。

OWNER                          CONSTRAINT_NAME                TABLE_NAME                     COLUMN_NAME                                                                        POSITION
------------------------------ ------------------------------ ------------------------------ -------------------------------------------------------------------------------- ----------
ZSR                            SYS_C007035                    YG2                            BH                                                                               

-- check示例：
create table yg3(bh number(4) not null  check (bh>0  and  bh<10000),   xm varchar2(8));

CONSTRAINT_NAME                CONSTRAINT_TYPE TABLE_NAME                     INDEX_NAME
------------------------------ --------------- ------------------------------ ------------------------------
SYS_C007036                    C               YG3                            
SYS_C007037                    C               YG3                

OWNER                          CONSTRAINT_NAME                TABLE_NAME                     COLUMN_NAME                                                                        POSITION
------------------------------ ------------------------------ ------------------------------ -------------------------------------------------------------------------------- ----------
ZSR                            SYS_C007036                    YG3                            BH                                                                               
ZSR                            SYS_C007037                    YG3                            BH

--unique示例：
create table yg4(部门号 number(4) not null, 部门内号 number(4), xm varchar2(8) , unique(部门号,部门内号));

CONSTRAINT_NAME                CONSTRAINT_TYPE TABLE_NAME                     INDEX_NAME
------------------------------ --------------- ------------------------------ ------------------------------
SYS_C007038                    C               YG4                            
SYS_C007039                    U               YG4                            SYS_C007039

OWNER                          CONSTRAINT_NAME                TABLE_NAME                     COLUMN_NAME                                                                        POSITION
------------------------------ ------------------------------ ------------------------------ -------------------------------------------------------------------------------- ----------
ZSR                            SYS_C007038                    YG4                            部门号                                                                           
ZSR                            SYS_C007039                    YG4                            部门号                                                                                    1
ZSR                            SYS_C007039                    YG4                            部门内号 																				   2
--unique会创建索引，使用得当，增快很多

--default的使用 （编号，姓名，工资）
create table yg5(bh number(4),xm varchar2(8),gz number(10) default 1000);
插入默认值：直接在列写 default或插入时不指定有默认值的列。
```

- 【查看已有表】
```SQL
select * from tab;
Warning: connection was lost and re-established

TNAME                          TABTYPE  CLUSTERID
------------------------------ ------- ----------
YG2                            TABLE   
YG3                            TABLE   
YG4                            TABLE   
YG5                            TABLE
```

```SQL
--如果大小是固定的，要用char而不要用varchar，可以大大提高检索速度
create table stuinfo(
sno char(8),
sname varchar2(10) not null,
sage int check(sage>=18 and sage<=50),
smale char(2) default '男' check(smale='男' or smale='女'),
deptno char(4),
constraints pk_stuinfo primary key(sno)
);

create table department(deptno char(4),deptname varchar2(20),constraints pk_department primary key);

alter table stuinfo add constraints fk_department foreign key(deptno)
references department(deptno);

--如果依赖外键被删掉了，那oracle也会自动的在其表上移除外键。
```